# Maintainer: BurningC4 <wangweichen1995@hotmail.com>

pkgname=kodi-addon-pvr-hdhomerun
pkgbase=${pkgname}
pkgver=20.4.0
pkgrel=2
pkgdesc="Kodi's HDHomeRun client addon"
arch=('i686' 'x86_64' 'armv6h' 'armv7h' 'aarch64')
url="https://github.com/kodi-pvr/pvr.hdhomerun"
license=('GPL')
groups=('kodi-addons')
makedepends=('cmake' 'kodi-platform' 'git' 'kodi-dev')
depends=('kodi' 'p8-platform')
source=("pvr.hdhomerun.tar.gz::https://github.com/kodi-pvr/pvr.hdhomerun/archive/c83bf1121c22772cbd32927f53a89c362141db0e.tar.gz")
sha512sums=('11e735e92f2378de42e5a46947290a36fa6b8289e75a47fbaf9cf4546f22b03c42a67f27df35cb96bf5355166091ad122f26e7f6ee7bf52dd22dd2d11eeda2db')

_prefix='/usr'

build() {
  msg "Starting make..."

  cd "$srcdir/pvr.hdhomerun-c83bf1121c22772cbd32927f53a89c362141db0e"
  mkdir -p build && pushd build
  cmake \
    -DCMAKE_INSTALL_PREFIX=$_prefix \
    -DCMAKE_BUILD_TYPE=Release \
    ..
  make
  popd
}

package() {
  cd "$srcdir/pvr.hdhomerun-c83bf1121c22772cbd32927f53a89c362141db0e/build"
  make DESTDIR="$pkgdir" install
}
